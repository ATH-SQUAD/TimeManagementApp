@page
@model TimeManagementApp.Pages.UserPanel.TwojProfilModel
@{
    ViewData["Title"] = "Twój Profil";
    Layout = "~/Pages/Shared/_MainLayout.cshtml";
}
@section Styles {
    <link rel="stylesheet" href="~/Styles/TimeManagement/TwojProfil.css" type="text/css" />
}
@section Scripts {
    <script src="~/Scripts/TimeManagement/TwojProfil.js" type="text/javascript"></script>
}
@inject Microsoft.AspNetCore.Identity.UserManager<TimeManagementApp.Database.Models.ApplicationUser> UserManager


<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <!-- Navbar -->
        @*<nav class="main-header navbar navbar-expand navbar-white navbar-light">
                 Left navbar links
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                    </li>
                    <li class="nav-item d-none d-sm-inline-block">
                        <a href="../../index3.html" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item d-none d-sm-inline-block">
                        <a href="#" class="nav-link">Contact</a>
                    </li>
                </ul>

                 SEARCH FORM
                <form class="form-inline ml-3">
                    <div class="input-group input-group-sm">
                        <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
                        <div class="input-group-append">
                            <button class="btn btn-navbar" type="submit">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </form>

                 Right navbar links
                <ul class="navbar-nav ml-auto">
                     Messages Dropdown Menu
                    <li class="nav-item dropdown">
                        <a class="nav-link" data-toggle="dropdown" href="#">
                            <i class="far fa-comments"></i>
                            <span class="badge badge-danger navbar-badge">3</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                            <a href="#" class="dropdown-item">
                                 Message Start
                                <div class="media">
                                    <img src="../../dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                                    <div class="media-body">
                                        <h3 class="dropdown-item-title">
                                            Brad Diesel
                                            <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                                        </h3>
                                        <p class="text-sm">Call me whenever you can...</p>
                                        <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                    </div>
                                </div>
                                 Message End
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                 Message Start
                                <div class="media">
                                    <img src="../../dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                                    <div class="media-body">
                                        <h3 class="dropdown-item-title">
                                            John Pierce
                                            <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                                        </h3>
                                        <p class="text-sm">I got your message bro</p>
                                        <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                    </div>
                                </div>
                                 Message End
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                 Message Start
                                <div class="media">
                                    <img src="../../dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                                    <div class="media-body">
                                        <h3 class="dropdown-item-title">
                                            Nora Silvester
                                            <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                                        </h3>
                                        <p class="text-sm">The subject goes here</p>
                                        <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                    </div>
                                </div>
                                 Message End
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
                        </div>
                    </li>
                     Notifications Dropdown Menu
                    <li class="nav-item dropdown">
                        <a class="nav-link" data-toggle="dropdown" href="#">
                            <i class="far fa-bell"></i>
                            <span class="badge badge-warning navbar-badge">15</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                            <span class="dropdown-item dropdown-header">15 Notifications</span>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-envelope mr-2"></i> 4 new messages
                                <span class="float-right text-muted text-sm">3 mins</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-users mr-2"></i> 8 friend requests
                                <span class="float-right text-muted text-sm">12 hours</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-file mr-2"></i> 3 new reports
                                <span class="float-right text-muted text-sm">2 days</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
                            <i class="fas fa-th-large"></i>
                        </a>
                    </li>
                </ul>
            </nav>*@
        <!-- /.navbar -->
        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">


            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-3" style="text-align:center">

                            <!-- Profile Image -->
                            <div class="card  card-outline">
                                <div class="card-body box-profile">
                                    <div class="text-center">
                                        <img class="profile-user-img img-fluid img-circle"
                                             src="/AdminLTE-3.0.5/dist/img/user2-160x160.jpg"
                                             alt="User profile picture">
                                    </div>

                                    <h3 class="profile-username text-center">@UserManager.GetUserAsync(User).Result.Firstname @UserManager.GetUserAsync(User).Result.Lastname</h3>


                                </div>
                                <!-- /.card-body -->
                            </div>
                            <!-- /.card -->
                            <!-- About Me Box -->
                            <div class="card card-primary">
                                <div class="card-header" style="background-color:#28a745;">
                                    <h3 class="card-title">Twoje dane</h3>
                                </div>
                                <!-- /.card-header -->
                                <div class="card-body">
                                    <strong><i class="fas fa-envelope mr-1"></i> Email</strong>

                                    <p class="text-muted">
                                        @UserManager.GetUserAsync(User).Result.Email
                                    </p>

                                    <hr>

                                    <strong><i class="fas fa-phone-alt mr-1"></i> Numer telefonu</strong>

                                    <p class="text-muted">@UserManager.GetUserAsync(User).Result.PhoneNumber</p>

                                    <hr>

                                    <strong><i class="fas fa-calendar-alt mr-1"></i> Data dołaczenia</strong>

                                    <p class="text-muted">
                                        @UserManager.GetUserAsync(User).Result.CreatedAt
                                    </p>
                                    <hr>
                                    <p>
                                        <a href="/TimeManagement/Panel/EdytujDaneUzytkownika" class="btn btn-success btn-primary" style="float:left;">Zaktualizuj dane</a> <a href="/TimeManagement/Panel/ZmienHaslo" class="btn btn-success btn-primary" style="float:right">Zmień hasło</a>
                                    </p>

                                </div>
                                <!-- /.card-body -->
                            </div>
                            <!-- /.card -->
                        </div>
                        <div class="col-md-9">
                            <div class="card">
                                <div class="card-header p-2">
                                    <ul class="nav nav-pills">
                                        <li class="nav-item"><a class="nav-link active" href="#settings" data-toggle="tab">Edytuj Dane Osobowe</a></li>
                                        <li class="nav-item"><a class="nav-link" href="#ChangePassword" data-toggle="tab">Bezpieczeństwo</a></li>
                                    </ul>
                                </div>
                                <div class="card-body">
                                    <div class="tab-content">
                                        <div class="active tab-pane" id="settings">
                                            <form asp-action="UpdateUser" asp-controller="Users">



                                                @*<div class="form-group">
                                                        <div class="form-group">
                                                            <input type="hidden" asp-for="@UserManager.GetUserAsync(User).Result.Id;" />
                                                        </div>
                                                        <div class="form-group">
                                                            <label asp-for="model.Email" class="control-label">Email</label>
                                                            <input type="text" asp-for="model.Email" class="form-control" />
                                                        </div>
                                                        <div class="form-group">
                                                            <label asp-for="model.FirstName" class="control-label">Imie</label>
                                                            <input type="text" asp-for="model.FirstName" class="form-control" />
                                                        </div>
                                                        <div class="form-group">
                                                            <label asp-for="model.SecondName" class="control-label">Nazwisko</label>
                                                            <input type="text" asp-for="model.SecondName" class="form-control" />
                                                        </div>
                                                        <div class="form-group">
                                                            <label asp-for="model.PhoneNumber" class="control-label">Numer telefonu</label>
                                                            <input type="text" asp-for="model.SecondName" class="form-control" />
                                                        </div>
                                                        <div asp-validation-summary="All" class="text-danger"></div>
                                                        <div class="form-group">
                                                            <input type="submit" asp-page-handler="UpdateUser" value="Save" class="btn btn-success" />
                                                        </div>
                                                    </div>*@
                                            </form>
                                        </div>
                                        @*<div class="tab-pane" id="ChangePassword">
                                                <form asp-action="OnPostAsync" asp-controller="Users">
                                                    <div class="form-group">
                                                        <div class="form-group">
                                                            <label asp-for="Input.OldPassword"></label>
                                                            <input asp-for="Input.OldPassword" class="form-control" />
                                                            <span asp-validation-for="Input.OldPassword" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group">
                                                            <label asp-for="Input.NewPassword"></label>
                                                            <input asp-for="Input.NewPassword" class="form-control" />
                                                            <span asp-validation-for="Input.NewPassword" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group">
                                                            <label asp-for="Input.ConfirmPassword"></label>
                                                            <input asp-for="Input.ConfirmPassword" class="form-control" />
                                                            <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
                                                        </div>
                                                        <div asp-validation-summary="All" class="text-danger"></div>
                                                        <div class="form-group">
                                                            <input type="submit" asp-page-handler="OnPostAsync" value="Save" class="btn btn-success" />
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>*@
                                        @*/.tab-pane*@
                                    </div>
                                    @*/.tab-content*@
                                </div> @*/.card-body*@
                            </div>
                            @*/.card*@
                        </div>
                        <!-- /.col -->
                    </div>
                    <!-- /.row -->
                </div><!-- /.container-fluid -->
            </section>
            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->
        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Control sidebar content goes here -->
        </aside>
        <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->
    <!-- jQuery -->
    <script src="../../plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../../dist/js/demo.js"></script>
</body>
</html>

@*<body>
    <div class="row-cols-md-1">
        <div class="hold-transition login-page justify-content-start">
            <div class="col-sm-6" style="align-content:center;">
                <div class="card-body register-card-body">
                    <div class="row" style="">
                        <tr>
                            <div class="info" style="text-align:center;">
                                <img src="/AdminLTE-3.0.5/dist/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image">
                            </div>
                        </tr>
                        <tr>
                            <div class="col-6" style="align-content:left; padding:30px;">

                                <p><h2> @UserManager.GetUserAsync(User).Result.Firstname @UserManager.GetUserAsync(User).Result.Lastname</h2></p>
                                <p>Email: @UserManager.GetUserAsync(User).Result.Email </p>
                                <p>Data dołączenia: @UserManager.GetUserAsync(User).Result.CreatedAt </p>
                                <button type="button" class="btn btn-success btn-secondary" onclick="location.href='/TimeManagement/UserPanel/EditUserProfile'">Zmodyfikuj swoje dane</button>
                                <a asp-page="EditUserProfile" class="btn btn-success btn-primary" asp-route-id="@UserManager.GetUserAsync(User).Result.Id">Zmień swoje dane</a>
                            </div>
                        </tr>
                    </div>
                </div>
            </div>
            <p></p>*@
@*<div class="row-cols-md-1">
    <div class="card-body jsgrid-grid-body" style="padding-right:4em;">
        <form method="post">
            <h2>Wiadomość do Administratora</h2>
            <div class="input-group"></div>
            <input asp-for="UserEmailSend.Subject" type="text" class="form-control" placeholder="Temat Wiadomości">
            <div class="input-group"></div>
            <textarea input asp-for="UserEmailSend.Body" type="text" class="form-control" rows="4" cols="80" placeholder="Opisz problem"></textarea>

            <div class="row">
                 /.col
                <div class="col-4">
                    <button type="submit" class="btn btn-success btn-secondary">Wyślij</button>
                </div>
                 /.col
            </div>
        </form>
    </div>*@
@*</div>
            </div>
        </div>
    </body>*@
@*<body>
            <h3>Profile</h3>
            <div>
                <div class="profile-photo"></div>
                <h4>Lynda Schleifer</h4>
                <p>Sales Associate</p>
            </div>

                <div class="card-body register-card-body">
                    <h2>Zmień hasło</h2>

                    <form method="post" asp-page-handler="ChangePasswordViewModel">
                        <div class="input-group">
                            <input asp-for="model.CurrentPassword" type="password" class="form-control" placeholder="Stare hasło">
                            <div class="input-group-append">
                                <div class="input-group-text">
                                    <span class="fas fa-lock"></span>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <span asp-validation-for="model.CurrentPassword" class="text-danger"></span>
                        </div>

                        <div class="input-group">
                            <input asp-for="model.NewPassword" type="password" class="form-control" placeholder="Nowe hasło">
                            <div class="input-group-append">
                                <div class="input-group-text">
                                    <span class="fas fa-lock"></span>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <span asp-validation-for="model.NewPassword" class="text-danger"></span>
                        </div>

                        <div class="input-group">
                            <input asp-for="model.ConfirmPassword" type="password" class="form-control" placeholder="Powtórz hasło">
                            <div class="input-group-append">
                                <div class="input-group-text">
                                    <span class="fas fa-lock"></span>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <span asp-validation-for="model.ConfirmPassword" class="text-danger"></span>
                        </div>

                        <div class="row">
                             /.col
                            <div class="col-4">
                                <button type="submit" class="btn btn-success btn-primary" onclick=function(ChangePassword)>Zmień</button>
                            </div>
                             /.col
                        </div>
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    </form>
                </div>

        <div class="card-body jsgrid-grid-body ">
            <form method="post" asp-page-handler="SendEmail">
                <h2>Wiadomość do Administratora</h2>
                <div class="input-group"></div>
                <input asp-for="UserEmailSend.Subject" type="text" class="form-control" placeholder="Temat Wiadomości">
                <div class="input-group"></div>
                <textarea input asp-for="UserEmailSend.Body" type="text" class="form-control" rows="4" cols="80" placeholder="Opisz problem"></textarea>

                <div class="row">
                     /.col
                    <div class="col-4">
                        <button type="submit" class="btn btn-success">Wyślij</button>
                    </div>
                     /.col
                </div>
            </form>
        </div>
    </body>*@

<script type="text/javascript">
    $(function () {
        let message = '@TempData["SuccessChangePwMessage"]'
        if (message != '' && message != null) {
            toastr.success("", message);
        }
    });
</script>